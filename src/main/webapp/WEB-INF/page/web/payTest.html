<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>支付中心</title>
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
    </head>

    <body>
        <div id="qrcode"></div><!-- 二维码 -->

        <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
        <script src="/commons/js/plugin/qrcode/qrcode.min.js"></script>
        <script type="text/javascript">
            $(function(){
                var url = 'http://www.klpua.com';

                if(isWeiXin()){
                    url = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0d7797805ed0d9b3&redirect_uri=http://' + 'ell.ishsls.com' + '/page/h5/pay?purchaseId=' + '2be154c384574f3997926b9632e430b6' + '&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect';
                }else{
                    url += '/page/h5/pay?purchaseId=' + '2be154c384574f3997926b9632e430b6';
                }

                var qrcode = new QRCode("qrcode", {
                    text: url,
                    width: 256,
                    height: 256,
                    colorDark : "#000",
                    colorLight : "#fff",
                    correctLevel : QRCode.CorrectLevel.H
                });


            });

            //判断是否微信客户端
            function isWeiXin(){
                var ua = window.navigator.userAgent.toLowerCase();
                if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                    return true;
                }else{
                    return false;
                }
            };
        </script>
    </body>
</html>